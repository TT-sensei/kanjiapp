<!doctype html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>かんじマスター・コンプリート</title>
    
    <script src="kanji-data.js"></script>
    <script src="title-data.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="title-screen" class="screen active">
   <h1>🌟 かんじマスター</h1>
   <div class="mascot-area" id="title-mascot">🥚</div>
   <div class="level-title-area">
    Lv.<span id="title-level">1</span> 
    <span class="title-badge" id="title-name">漢字タマゴ</span>
   </div>
   <div class="grade-selector">
     <button class="grade-btn selected" onclick="setGrade(1)"><div class="grade-btn-icon">📚</div><div>1年</div></button> 
     <button class="grade-btn" onclick="setGrade(2)"><div class="grade-btn-icon">📖</div><div>2年</div></button> 
     <button class="grade-btn" onclick="setGrade(3)"><div class="grade-btn-icon">✏️</div><div>3年</div></button> 
     <button class="grade-btn" onclick="setGrade(4)"><div class="grade-btn-icon">📝</div><div>4年</div></button> 
     <button class="grade-btn" onclick="setGrade(5)"><div class="grade-btn-icon">🖊️</div><div>5年</div></button> 
     <button class="grade-btn" onclick="setGrade(6)"><div class="grade-btn-icon">📑</div><div>6年</div></button>
   </div>
   
   <div class="home-search-box">
     <input type="text" id="home-search-input" placeholder="さがしたい かんじ"> 
     <button aria-label="検索する" onclick="handleHomeSearch()">🔍</button>
   </div>
   
   <div class="menu-grid">
       <button aria-label="練習モード" class="menu-btn btn-practice" onclick="selectMode('practice')">✏️<br>れんしゅう</button> 
       <button aria-label="テストモード" class="menu-btn btn-test" onclick="selectMode('test')">🏅<br>テスト</button>
       <button aria-label="マイ漢字" class="menu-btn btn-mykanji" onclick="selectMode('mykanji')">⭐<br>マイ漢字をみる</button>
       <button aria-label="マイ漢字テスト" class="menu-btn btn-mykanji-test" onclick="startMyKanjiRandomTest()">🎯<br>マイ漢字テスト</button>
       <button aria-label="ランダムテスト" class="menu-btn btn-random" onclick="startRandomTest()">🎲 ランダムテスト (10問)</button>
   </div>
   
   <div class="reset-link"><span onclick="showResetConfirm()">📋 データリセット</span></div>

   <div class="footer-note"><strong>⚠️ 保護者・先生方へ</strong><br>
     本アプリは学習支援のために作成されました。漢字のデータは日本の学習指導要領を参照しています。 
    <div style="margin-top: 10px; padding: 12px; background-color: #f9f9f9; border-left: 5px solid var(--accent3); font-size:0.85rem; border-radius: 8px;"><strong>【判定に関するご注意】</strong><br>
      ・標準的な字体を使用しているため、教科書の字体と細部が異なる場合があります。<br>
      ・<strong>学校で習った書き方が最も正しい基準です。</strong>アプリの判定はあくまで目安としてご活用ください。
    </div>
   </div>

   <div class="app-credits-container">
    <div class="credit-warning-box">
     <div class="credit-warning-title">⚠️ 筆順（書き順）について</div>
     <div>データの都合上、一部の漢字で標準と異なる筆順が表示される場合があります。<br><strong>学校の教科書や先生の指導と異なる場合は、教科書を正解としてください。</strong></div>
    </div>
    <h3 class="credit-section-title">使用データ・ライセンス</h3>
    <ul class="credit-list">
     <li class="credit-item">
      <div class="credit-name">1. KanjiVG</div>
      <div class="credit-desc">Copyright (c) 2009-2023 Ulrich Apel.<br>Licensed under the Creative Commons Attribution-Share Alike 3.0 License.</div></li>
    </ul>
   </div>
  </div>
  
  <div id="list-screen" class="screen">
   <div class="header-bar">
    <button class="back-btn" onclick="showScreen('title-screen')">🏠 ホーム</button>
    <div style="font-weight:700; font-size:1.1rem;"><span id="list-mascot">🥚</span> Lv.<span id="list-level">1</span></div>
   </div>
   <div class="xp-container">
    <div class="xp-bar" id="xp-bar"></div>
   </div>
   <div style="text-align:right; font-size:0.85rem; margin-bottom:12px; color:#666; font-weight:600;">
    つぎのレベルまで あと <span id="next-xp">5</span>こ
   </div>
   <div class="search-area">
    <input type="text" id="search-box" placeholder="かんじ を さがす..." oninput="filterList()">
   </div>
   <div style="margin-bottom:15px; display:flex; justify-content:center;"><span id="mode-display"></span></div>
   <div id="kanji-grid" class="kanji-grid"></div>
  </div>
  
  <div id="practice-screen" class="screen">
    <div class="header-bar">
      <button class="back-btn" onclick="handleBackFromPractice()">↩ もどる</button>
      <button id="mykanji-toggle" class="mykanji-btn" onclick="toggleMyKanji()">☆ マイ漢字</button>
    </div>
    <h2 id="message-area"></h2>
    <div id="current-reading" style="font-size:3rem; font-weight:bold; text-align:center; margin:5px 0; color:#333;"></div>
    
    <div id="practice-area">
      <div id="character-target"></div>
    </div>
    
    <div class="controls">
      <button aria-label="書き順再生" class="control-btn" onclick="playAnimation()">▶</button> 
      <button aria-label="リトライ" class="control-btn" onclick="retry()">↺</button>
    </div>
  </div>
  
  <div id="result-overlay" class="overlay">
   <div class="result-content">
    <div class="big-icon" id="result-icon">⭐</div>
    <h2 id="result-msg">できた！</h2>
    <button class="next-btn" onclick="handleNextClick()">つぎへ ➜</button> 
    <button class="retry-btn" onclick="document.getElementById('result-overlay').classList.remove('active'); retry();">もういっかい</button>
   </div>
  </div>
  
  <div id="levelup-overlay" class="overlay">
   <div class="result-content">
    <h2>レベルアップ！！</h2>
    <div class="levelup-anim">✨</div>
    <div class="new-level-text">Lv.<span id="new-level-num">2</span> になった！</div>
    <div id="levelup-mascot">🐣</div>
    <p style="font-size:0.9rem; margin:10px 0;">すごいぞ！<br>さらに強くなったね！</p>
    <button class="next-btn" onclick="closeLevelUp()">🎉 やったー！</button>
   </div>
  </div>

  <div id="random-clear-overlay" class="overlay">
    <div class="result-content">
     <h2 style="color:var(--accent4);">テストクリア！</h2>
     <div class="big-icon">🎉</div>
     <p style="font-size:1.1rem; font-weight:bold; margin:15px 0;">せいかい！<br>ボーナス経験値 +10 ゲット！</p>
     <button class="next-btn" onclick="handleRandomClearClick()">🏠 ホームへ</button>
    </div>
  </div>
  
  <div id="reset-confirm" class="confirm-modal">
   <div class="confirm-content">
    <h3 style="font-size:1.2rem;">ほんとうに データを けしますか？</h3>
    <p style="color:#666;">レベルも マイ漢字も １からに なります。</p>
    <button class="confirm-btn confirm-btn-yes" onclick="executeReset()">はい、けします</button> 
    <button class="confirm-btn confirm-btn-no" onclick="closeResetConfirm()">キャンセル</button>
   </div>
  </div>

  <script src="main.js"></script>
</body>
</html>
